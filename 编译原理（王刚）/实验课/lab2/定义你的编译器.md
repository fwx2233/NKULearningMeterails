# 定义你的编译器

## 我的编译器支持的SysY语言特性

* 符号[...]表示方括号内包含的为可选项
* 符号(...)表示括号内包含的项中选择一个
* 符号{...}表示花括号内包含的为可重复 0 次或多次的项
* 终结符由黑体标识出
* 斜体以符号//开头为注释

定义的文法表示如下，其中CompUnit为开始符号：

CompUnit → CompUnit Decl | CompUnit FuncDef | Decl | FuncDef*//编译单元*



### 定义部分

type → **int** *//支持的类型*

digit → number digit
number → [**0**-**9**]

lval → **id** {**[**expr**]**} *//可以改变的左值*

unary_expr → pri_exp | **id** **(** func_rps **)** | unary_op unary_expr     *//一元表达式*

pri_exp → **(** expr **)** | lval | **int** *//基本表达式*

unary_op → **+** | **-** | **！** *//单目运算符*

ConstDecl → **const** type ConstDef || ConstDecl ,ConstDef       *//常数声明*

ConstDef → **id** {**[** const_expr **]**} **=** ConstInitVal       *//常数定义*

ConstInitVal → const_expr | **{** **}** | **{** InitValList **}**

VarDecl →  type VarDef | VarDecl , VarDef  *//变量声明*

VarDef → **Id**{**[** ConstExp **]** } | **Id** { **[** ConstExp **] **}**=** InitVal    *//变量定义*



InitVal → expr | **{** **}** | **{** InitValList **}**

InitValList→ const_expr | InitValList, const_expr



### 运算部分

> expr → add_expr *//表达式*
>
> 总觉得这些运算里还有些问题，但是我没看出来。。。你再看看吧？

cond → lor_expr

lor_expr → land_expr | lor_expr **||** eql_expr 

land_expr → eql_expr| land_expr **&&** eql_expr

eql_expr → rel_expr | eql_expr (**==** | **!=**) rel_expr 

add_expr  → mul_expr | add_expr (**+**|**-**) mul_expr

mul_expr → unary_expr | mul_expr (*****|**/**|**%**) unary_expr

rel_expr → **(** add_expr **)** | rel_expr (**<**|**>**|**<=**|**>=**) add_expr

const_expr → add_expr

### 函数部分

func_def → func_type **id** **(** func_fps **)** block *//函数声明*

func_type → **void** | **int**  *//函数返回值类型*

func_fps → func_fp | func_fp**,** func_fps *//函数参数*

func_fp →  type **id** | type **id** **[ ]** | func_fp **[** expr **]** *//单个参数*

block → **{ **{blockitem} **}**

blockitem → Decl | Stmt 

Decl → ConstDecl | VarDec

Stmt → lavl **=** pri_exp **;** | **[**pri_exp**]** **;** | block | **if** **(**cond **)** Stmt [**else** Stmt] 

​							| **while** **(** cond**)** Stmt | **break** **;** | **return** [exp] **;** | **continue** **;** | **ε**

func_rps → expr | func_rps **,** cond

### 部分终结符特征

#### id

**id**的规范如下(identifier)

identifier → identfitier-nondigit | identifier identfitier-nondigit | identfitier digit

其中identfitier-nondigit为下划线或者[**a**-**z** **A**-**Z**] *//这里使用了正则表达式来表示*



#### //unint

//**unint**为([**1**-**9**]*[**0**-**9**]?)\*[**1**-**9**] *//这里使用了正则表达式来表示*

